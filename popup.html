<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tandev Ultimate</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons+Round" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="app-container">
        <div class="header">
            <div class="brand">
                <span class="material-icons-round brand-icon">hub</span>
                <div>
                    <h1>Tandev Suite</h1>
                    <span class="badge">ULTRA V5</span>
                </div>
            </div>
        </div>

        <div class="tab-nav">
            <button class="tab-btn active" data-target="tab-flow">
                <span class="material-icons-round">auto_fix_high</span> Flow Auto
            </button>
            <button class="tab-btn" data-target="tab-down">
                <span class="material-icons-round">download</span> Downloader
            </button>
        </div>

        <div id="tab-flow" class="tab-content active">
            <div class="card">
                <div class="card-header">
                    <span class="material-icons-round">image</span>
                    <h3>1. Chọn Hình Ảnh</h3>
                </div>
                <div class="file-upload-wrapper">
                    <input type="file" id="flow_imageInput" multiple accept="image/*" class="file-input" hidden>
                    <label for="flow_imageInput" class="file-label">
                        <span class="material-icons-round">folder_open</span>
                        <span id="flow_fileLabelText">Chọn folder ảnh...</span>
                    </label>
                    <div class="badge-count" id="flow_imageCount">0</div>
                </div>
            </div>

            <div class="card">
                <div class="card-header">
                    <span class="material-icons-round">description</span>
                    <h3>2. Nhập Prompt</h3>
                </div>
                <textarea id="flow_promptInput" placeholder="Dán danh sách prompt vào đây..." spellcheck="false"></textarea>
                <div class="meta-right" id="flow_promptCount">0 dòng</div>
            </div>

            <div class="status-box">
                <div class="status-row">
                    <span id="flow_statusText">Sẵn sàng</span>
                    <span id="flow_timeInfo">--:--</span>
                </div>
                <div class="progress-bg"><div id="flow_progressBar" class="progress-fill"></div></div>
            </div>

            <div class="action-row">
                <button id="flow_startBtn" class="btn btn-primary">
                    <span class="material-icons-round">play_arrow</span> CHẠY FLOW
                </button>
                <button id="flow_stopBtn" class="btn btn-danger icon-only">
                    <span class="material-icons-round">stop</span>
                </button>
            </div>
        </div>

        <div id="tab-down" class="tab-content">
            <div class="card">
                <div class="field-group">
                    <label>Lưu vào thư mục</label>
                    <div class="input-with-icon">
                        <span class="material-icons-round">folder</span>
                        <input type="text" id="down_folderName" placeholder="VD: TikTok_Videos" autocomplete="off" style="padding-right: 40px;">
                        <button id="down_openSettings" class="btn-settings" title="Cài đặt lưu trữ">
                            <span class="material-icons-round">settings</span>
                        </button>
                    </div>
                </div>

                <div class="field-group">
                    <label>Tên file mẫu <span id="down_filenamePreview" class="preview-tag">video_1.mp4</span></label>
                    <div class="input-with-icon">
                        <span class="material-icons-round">edit</span>
                        <input type="text" id="down_filePattern" placeholder="video_{index}" autocomplete="off">
                    </div>
                </div>
            </div>

            <div class="status-box" id="down_statusBox">
                <div class="status-row">
                    <span id="down_statusText">Hệ thống sẵn sàng</span>
                    <span>Detected: <b id="down_countDisplay" style="color:var(--accent)">0</b></span>
                </div>
            </div>

            <div class="action-stack">
                <button id="down_btnStart" class="btn btn-primary">
                    <span class="material-icons-round">download</span> QUÉT & TẢI NGAY
                </button>
                
                <div id="down_runningGroup" class="hidden-group" style="display:none; gap:10px; margin-top:10px">
                    <button id="down_btnStop" class="btn btn-secondary">Dừng & Lưu</button>
                    <button id="down_btnKill" class="btn btn-danger icon-only">✕</button>
                </div>
            </div>
        </div>

    </div>

    <script src="tabs.js"></script>
    <script src="flow_logic.js"></script>
    <script src="down_logic.js"></script>
</body>
</html>